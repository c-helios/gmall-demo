{"ast":null,"code":"import _objectSpread from \"/Users/hcw/vueProjects/gmall/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapState } from 'vuex'; //防抖 节流\n\nimport throttle from 'lodash/throttle';\nexport default {\n  name: 'TypeNav',\n  data: function data() {\n    return {\n      currentIndex: -1,\n      showAllCategory: true\n    };\n  },\n  mounted: function mounted() {\n    this.$store.dispatch('categoryList');\n\n    if (this.$route.path != '/home') {\n      this.showAllCategory = false;\n    }\n  },\n  computed: _objectSpread({}, mapState({\n    categoryList: function categoryList(state) {\n      return state.home.categoryList;\n    }\n  })),\n  methods: {\n    // changeIndex(index){\n    //     this.currentIndex = index\n    // },\n    // 一次快速多次点击，50ms才会生效一次，\n    changeIndex: throttle(function (index) {\n      this.currentIndex = index;\n    }, 20),\n    enterShow: function enterShow() {\n      this.showAllCategory = true;\n    },\n    leaveShow: function leaveShow() {\n      this.currentIndex = -1;\n\n      if (this.$route.path != '/home') {\n        this.showAllCategory = false;\n      }\n    },\n    goSearch: function goSearch(event) {\n      var node = event.target;\n      var _node$dataset = node.dataset,\n          categoryname = _node$dataset.categoryname,\n          category1id = _node$dataset.category1id,\n          categor2id = _node$dataset.categor2id,\n          category3id = _node$dataset.category3id;\n\n      if (categoryname) {\n        var location = {\n          name: \"search\"\n        };\n        var query = {\n          categoryName: categoryname\n        };\n\n        if (category1id) {\n          query.categoryId = category1id;\n        } else if (category1id) {\n          query.categoryId = category2id;\n        } else {\n          query.categoryId = category3id;\n        }\n\n        location.query = query;\n        this.$router.push(location);\n      }\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA,gC,CACA;;AACA;AAEA;EACAA,eADA;EAEAC,IAFA,kBAEA;IACA;MACAC,gBADA;MAEAC;IAFA;EAIA,CAPA;EAQAC,OARA,qBAQA;IACA;;IAEA;MACA;IACA;EACA,CAdA;EAeAC,4BACAC;IACAC;MAAA;IAAA;EADA,EADA,CAfA;EAoBAC;IACA;IACA;IACA;IACA;IACAC;MACA;IACA,CAFA,EAEA,EAFA,CALA;IAQAC,SARA,uBAQA;MACA;IACA,CAVA;IAWAC,SAXA,uBAWA;MACA;;MACA;QACA;MACA;IACA,CAhBA;IAiBAC,QAjBA,oBAiBAC,KAjBA,EAiBA;MACA;MAEA,oBAKAC,YALA;MAAA,IACAC,YADA,iBACAA,YADA;MAAA,IAEAC,WAFA,iBAEAA,WAFA;MAAA,IAGAC,UAHA,iBAGAA,UAHA;MAAA,IAIAC,WAJA,iBAIAA,WAJA;;MAOA;QACA;UAAAlB;QAAA;QACA;UAAAmB;QAAA;;QACA;UACAC;QACA,CAFA,MAEA;UACAA;QACA,CAFA,MAEA;UACAA;QACA;;QACAC;QACA;MACA;IAEA;EAzCA;AApBA","names":["name","data","currentIndex","showAllCategory","mounted","computed","mapState","categoryList","methods","changeIndex","enterShow","leaveShow","goSearch","event","node","categoryname","category1id","categor2id","category3id","categoryName","query","location"],"sourceRoot":"src/components/TypeNav","sources":["index.vue"],"sourcesContent":["<template>\n    <!-- 商品分类导航 -->\n    <div class=\"type-nav\">\n        <div class=\"container\">\n            <div @mouseleave=\"leaveShow\" @mouseenter=\"enterShow\">\n                <h2 class=\"all\">全部商品分类</h2>\n                <transition>\n                    <div class=\"sort\" v-show=\"showAllCategory\">\n                        <div class=\"all-sort-list2\" @click=\"goSearch\">\n                            <div class=\"item\" \n                                v-for=\"(c1,index) in categoryList\" :key=\"c1.categoryId\" \n                                :class=\"{cur:currentIndex==index}\"\n                            >\n                                <h3 @mouseenter=\"changeIndex(index)\">\n                                    <a :data-categoryName=\"c1.categoryName\" :data-category1Id=\"c1.categoryId\">{{c1.categoryName}}</a>\n                                </h3>\n                                <div class=\"item-list clearfix\" :style=\"{display: currentIndex==index ? 'block':'none'}\">\n                                    <div class=\"subitem\"  v-for=\"(c2,index) in c1.categoryChild\" :key=\"c2.categoryId\">\n                                        <dl class=\"fore\">\n                                            <dt>\n                                                <a :data-categoryName=\"c2.categoryName\" :data-category1Id=\"c2.categoryId\">{{c2.categoryName}}</a>\n                                            </dt>\n                                            <dd>\n                                                <em v-for=\"(c3,index) in c2.categoryChild\" :key=\"c3.categoryId\">\n                                                    <a :data-categoryName=\"c3.categoryName\" :data-category1Id=\"c3.categoryId\">{{c3.categoryName}}</a>\n                                                </em>\n                                            </dd>\n                                        </dl>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>\n                    </div>\n                </transition>\n            </div>\n            <nav class=\"nav\">\n                <a href=\"###\">服装城</a>\n                <a href=\"###\">美妆馆</a>\n                <a href=\"###\">尚品汇超市</a>\n                <a href=\"###\">全球购</a>\n                <a href=\"###\">闪购</a>\n                <a href=\"###\">团购</a>\n                <a href=\"###\">有趣</a>\n                <a href=\"###\">秒杀</a>\n            </nav>\n        </div>\n    </div>\n</template>\n\n<script>\nimport {mapState} from 'vuex'\n//防抖 节流\nimport throttle from 'lodash/throttle'\n\nexport default {\n    name: 'TypeNav',\n    data() {\n        return {\n            currentIndex:-1,\n            showAllCategory:true\n        }\n    },\n    mounted(){\n        this.$store.dispatch('categoryList')\n\n        if(this.$route.path !='/home') {\n            this.showAllCategory = false\n        }\n    },\n    computed:{\n        ...mapState({\n            categoryList:state=>state.home.categoryList\n        })\n    },\n    methods: {\n        // changeIndex(index){\n        //     this.currentIndex = index\n        // },\n        // 一次快速多次点击，50ms才会生效一次，\n        changeIndex:throttle(function(index){\n            this.currentIndex = index\n        },20),\n        enterShow(){\n            this.showAllCategory = true\n        },\n        leaveShow(){\n            this.currentIndex = -1\n            if(this.$route.path != '/home') {\n                this.showAllCategory = false\n            }\n        },\n        goSearch(event){\n            let node = event.target\n\n            let {\n                categoryname,\n                category1id,\n                categor2id,\n                category3id,\n            } = node.dataset\n\n            if(categoryname){\n                let location = {name:\"search\"}\n                let query = {categoryName:categoryname}\n                if(category1id) {\n                    query.categoryId = category1id;\n                } else if(category1id) {\n                    query.categoryId = category2id;\n                } else {\n                    query.categoryId = category3id;\n                }\n                location.query = query\n                this.$router.push(location)\n            }\n\n        }\n    },\n}\n</script>\n\n<style lang=\"less\" scoped>\n.type-nav { \n    border-bottom: 2px solid #e1251b;\n\n    .container {\n        width: 1200px;\n        margin: 0 auto;\n        display: flex;\n        position: relative;\n\n        .all {\n            width: 210px;\n            height: 45px;\n            background-color: #e1251b;\n            line-height: 45px;\n            text-align: center;\n            color: #fff;\n            font-size: 14px;\n            font-weight: bold;\n        }\n\n        .nav {\n            a {\n                height: 45px;\n                margin: 0 22px;\n                line-height: 45px;\n                font-size: 16px;\n                color: #333;\n            }\n        }\n\n        .sort {\n            position: absolute;\n            left: 0;\n            top: 45px;\n            width: 210px;\n            height: 461px;\n            position: absolute;\n            background: #fafafa;\n            z-index: 999;\n\n            .all-sort-list2 {\n                .item {\n                    h3 {\n                        line-height: 30px;\n                        font-size: 14px;\n                        font-weight: 400;\n                        overflow: hidden;\n                        padding: 0 20px;\n                        margin: 0;\n\n                        a {\n                            color: #333;\n                        }\n                    }\n\n                    .item-list {\n                        display: none;\n                        position: absolute;\n                        width: 734px;\n                        min-height: 460px;\n                        background: #f7f7f7;\n                        left: 210px;\n                        border: 1px solid #ddd;\n                        top: 0;\n                        z-index: 9999 !important;\n\n                        .subitem {\n                            float: left;\n                            width: 650px;\n                            padding: 0 4px 0 8px;\n\n                            dl {\n                                border-top: 1px solid #eee;\n                                padding: 6px 0;\n                                overflow: hidden;\n                                zoom: 1;\n\n                                &.fore {\n                                    border-top: 0;\n                                }\n\n                                dt {\n                                    float: left;\n                                    width: 54px;\n                                    line-height: 22px;\n                                    text-align: right;\n                                    padding: 3px 6px 0 0;\n                                    font-weight: 700;\n\n                                   \n                                }\n\n                                dd {\n                                    float: left;\n                                    width: 415px;\n                                    padding: 3px 0 0;\n                                    overflow: hidden;\n\n                                    em {\n                                        float: left;\n                                        height: 14px;\n                                        line-height: 14px;\n                                        padding: 0 8px;\n                                        margin-top: 5px;\n                                        border-left: 1px solid #ccc;\n                                    }\n                                }\n                            }\n                        }\n                    }\n\n                    // &:hover {\n                    //     .item-list {\n                    //         display: block;\n                    //     }\n                    // }\n                    \n                    a:hover {\n                        color:brown;\n                    }\n                \n                }\n\n                .cur {\n                    background-color:skyblue;\n                }\n\n            }\n        }\n\n        a:hover {\n            color:brown;\n            text-decoration-line: none;\n        }\n    }\n\n    \n}\n</style>"]},"metadata":{},"sourceType":"module"}